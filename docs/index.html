<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Noticias virales actualizadas en tecnología, salud, criptomonedas y más">
  <title>Famenews | Noticias Virales</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Estilos generales */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Helvetica Neue', Arial, sans-serif; }
    body { background: #f8f9fa; color: #333; line-height: 1.6; }
    .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 20px 0; }

    /* Variables CSS (tomadas de la versión anterior mejorada) */
    :root {
      --primary: #FF0000;
      --dark: #1A1A1A;
      --light: #FFFFFF;
      --gray: #6C757D;
      --light-gray: #dee2e6; /* Añadida para bordes o separadores sutiles */
    }

    /* Header */
    header { background: var(--dark); color: var(--light); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .header-content { display: flex; flex-direction: column; align-items: center; padding: 15px 0; }
    .logo { font-size: 32px; font-weight: 900; text-transform: uppercase; background: linear-gradient(90deg,var(--primary) 50%,var(--light) 50%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .categories-nav { display: flex; gap: 20px; margin-top: 10px; justify-content: center; flex-wrap: wrap; overflow-x: auto; padding-bottom: 10px; }
    .category-item { color: var(--light); text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 14px; position: relative; padding: 5px 0; transition: color 0.3s; white-space: nowrap; }
    .category-item::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: var(--primary); transition: width 0.3s; }
    .category-item:hover::after, .category-item.active::after { width: 100%; }
    .category-item:hover, .category-item.active { color: var(--primary); }

    /* Loader */
    .loader { border: 5px solid #f3f3f3; border-top: 5px solid var(--primary); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 30px auto; display: none; }
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

    /* Estructura de noticias y estilos de tarjetas */
    /* Destacada */
    .featured-news { background: var(--light); margin-bottom: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden; transition: transform 0.3s; }
    .featured-news:hover { transform: translateY(-5px); }
    .featured-news a { text-decoration: none; color: inherit; display: block; } /* Hace que el enlace ocupe toda la noticia */
    .featured-img { width: 100%; height: 400px; object-fit: cover; transition: transform 0.3s ease;} /* Añadida transición */
    .featured-content { padding: 25px; }
    .featured-tag { background: var(--primary); color: var(--light); display: inline-block; padding: 5px 10px; border-radius: 5px; font-size: 14px; margin-bottom: 10px; }
    .featured-title { font-size: 32px; margin-bottom: 15px; line-height: 1.3; }
    .featured-excerpt { font-size: 18px; color: #555; margin-bottom: 15px; }
    .featured-meta { color: var(--gray); font-size: 14px; }

    /* Secundarias */
    .secondary-news { display: grid; grid-template-columns: repeat(3,1fr); gap: 20px; margin-bottom: 30px; }
    .secondary-card { background: var(--light); border-radius: 8px; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: transform 0.3s; display: flex; flex-direction: column; position: relative;} /* Flexbox para layout interno, Relative para enlace */
    .secondary-card:hover { transform: translateY(-3px); }
    .secondary-img { width: 100%; height: 180px; object-fit: cover; transition: transform 0.3s ease;} /* Añadida transición */
    .secondary-content { padding: 15px; position: relative; z-index: 2;} /* Z-index para estar sobre el enlace */
    .secondary-tag { color: var(--primary); font-size: 12px; font-weight: bold; margin-bottom: 8px; }
    .secondary-title { font-size: 18px; margin-bottom: 10px; line-height: 1.4; }
    .secondary-meta { color: var(--gray); font-size: 12px; }

    /* Terciarias */
    .tertiary-news { display: grid; grid-template-columns: repeat(4,1fr); gap: 15px; }
    .tertiary-card { background: var(--light); border-radius: 5px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: transform 0.3s; display: flex; flex-direction: column; position: relative;} /* Flexbox para layout interno, Relative para enlace */
    .tertiary-card:hover { transform: translateY(-2px); }
    .terciary-img { width: 100%; height: 100px; object-fit: cover; transition: transform 0.3s ease;} /* Añadida transición */
    .tertiary-content { padding: 10px; position: relative; z-index: 2;} /* Z-index para estar sobre el enlace */
    .tertiary-title { font-size: 14px; margin-bottom: 5px; line-height: 1.3; }
    .tertiary-meta { color: var(--gray); font-size: 10px; }

    /* Enlace que cubre toda la tarjeta (para secundarias y terciarias) */
    .secondary-card > a, .tertiary-card > a {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1; /* Asegura que el enlace esté por encima del contenido visual */
        text-decoration: none;
        color: inherit; /* Hereda el color del texto */
    }

    /* Efecto hover en imágenes */
     .featured-news:hover .featured-img,
     .secondary-card:hover .secondary-img,
     .tertiary-card:hover .terciary-img {
       transform: scale(1.05);
     }


    /* Footer */
    .famenews-footer { background: var(--dark); color: var(--light); padding: 50px 0 30px; margin-top: 50px; border-top: 3px solid var(--primary); }
    .footer-container { display: grid; grid-template-columns: repeat(4,1fr); gap: 30px; padding-bottom: 40px; border-bottom: 1px solid #333; }
    .footer-section h4 { color: var(--primary); margin-bottom: 20px; font-size: 18px; text-transform: uppercase; }
    .footer-links { list-style: none; }
    .footer-links li { margin-bottom: 12px; }
    .footer-links a { color: #ccc; text-decoration: none; transition: color 0.3s; }
    .footer-links a:hover { color: var(--light); }
    .social-links { display: flex; gap: 15px; margin-top: 20px; }
    .social-links a { color: var(--light); font-size: 24px; transition: color 0.3s; }
    .social-links a:hover { color: var(--primary); }
    .footer-bottom { text-align: center; color: #999; font-size: 14px; margin-top: 30px; }
    .footer-brand { display: flex; flex-direction: column; align-items: center; gap: 15px; margin-bottom: 30px; }
    .footer-logo { font-size: 28px; font-weight: 900; background: linear-gradient(90deg,var(--primary) 50%,var(--light) 50%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

     /* Scroll Top Button */
    .scroll-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--primary);
      color: var(--light);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: none; /* Inicialmente oculto */
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: all 0.3s;
      z-index: 999; /* Asegurar que esté por encima del contenido */
    }

    .scroll-top:hover {
      transform: translateY(-3px);
    }

    /* Mensaje de error */
    .error-message {
      background: #FFEBEE; /* Color de fondo más claro */
      color: #B71C1C; /* Color de texto rojo oscuro */
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      grid-column: 1 / -1; /* Para ocupar todo el ancho si está en un grid */
      margin-top: 20px; /* Espacio superior */
    }


    /* Media Queries */
    @media (max-width: 992px) { .footer-container { grid-template-columns: repeat(2,1fr);} .secondary-news { grid-template-columns: repeat(2,1fr);} /* Ajuste */ }
    @media (max-width: 768px) { .categories-nav { gap: 15px;} .secondary-news { grid-template-columns: 1fr;} .tertiary-news { grid-template-columns: repeat(2,1fr);} .featured-title { font-size: 24px;} }
    @media (max-width: 576px) { .footer-container { grid-template-columns: 1fr;} .tertiary-news { grid-template-columns: 1fr;} }

     /* Preferencias de movimiento reducido */
     @media (prefers-reduced-motion: reduce) {
      .featured-img, .secondary-img, .terciary-img {
        transition: none;
        transform: none !important; /* Asegurar que no haya transformación */
      }
      .featured-news:hover, .secondary-card:hover, .tertiary-card:hover {
        transform: none;
      }
       .scroll-top { transition: none; transform: none !important;}
    }

  </style>
</head>
<body>
  <header>
    <div class="container header-content">
      <div class="logo">Famenews</div>
      <nav class="categories-nav">
        <a href="#" class="category-item active" data-category="general">Tendencias</a>
        <a href="#" class="category-item" data-category="business">Finanzas</a>
        <a href="#" class="category-item" data-category="technology">Tecnología</a>
        <a href="#" class="category-item" data-category="entertainment">Entretenimiento</a>
        <a href="#" class="category-item" data-category="health">Salud</a>
        <a href="#" class="category-item" data-category="science">Ciencia</a>
        <a href="#" class="category-item" data-category="crypto">Criptomonedas</a>
      </nav>
    </div>
  </header>
  <main class="container">
    <div class="loader" id="loader"></div>
    <div id="news-container"></div> </main>

   <div class="scroll-top" id="scrollTop">
     <i class="fas fa-arrow-up"></i>
   </div>

  <footer class="famenews-footer">
    <div class="container">
      <div class="footer-brand">
        <div class="footer-logo">Famenews</div>
        <p>Información viral que realmente importa</p>
      </div>
      <div class="footer-container">
        <div class="footer-section">
          <h4>Sobre nosotros</h4>
          <ul class="footer-links">
            <li><a href="#">Quiénes somos</a></li>
            <li><a href="#">Nuestro equipo</a></li>
            <li><a href="#">Carreras</a></li>
            <li><a href="#">Contacto</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Legal</h4>
          <ul class="footer-links">
            <li><a href="#">Términos de uso</a></li>
            <li><a href="#">Privacidad</a></li>
            <li><a href="#">Política de cookies</a></li>
            <li><a href="#">Accesibilidad</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Recursos</h4>
          <ul class="footer-links">
            <li><a href="#">Archivo</a></li>
            <li><a href="#">Newsletter</a></li>
            <li><a href="#">Aplicaciones</a></li>
            <li><a href="#">API</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Síguenos</h4>
          <div class="social-links">
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
            <a href="#"><i class="fab fa-tiktok"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© 2024 Famenews. Todos los derechos reservados.</p>
        <p>Noticias proporcionadas por Newsapi.ai y fuentes propias</p>
      </div>
    </div>
  </footer>
  <script>
    // Configuración de la aplicación de noticias
    const NewsApp = {
      API_KEY: 'b2f9fc39-ddcc-493a-b512-171dc224aa7d', // Tu API Key de Newsapi.ai
      BASE_URL: 'https://newsapi.ai/api/v1/article/getArticles',
      currentCategory: 'general', // Categoría inicial
      refreshIntervalId: null, // ID del temporizador de auto-actualización
      isLoading: false, // Para evitar múltiples cargas simultáneas

      // Mapeo de categorías del sitio a los parámetros de la API de Newsapi.ai
      apiCategoryMap: {
          general: '', // Omitir categoría para tendencias generales (filtrar por idioma)
          business: 'business',
          technology: 'tech', // Newsapi.ai usa 'tech' para tecnología
          entertainment: 'entertainment',
          health: 'health',
          science: 'science',
          // 'crypto' se maneja con query en loadNews
      },

      init: function() {
        console.log("Famenews App Initialized");
        this.setupEventListeners();
        this.loadInitialNews(); // Carga inicial de noticias
        this.setupScrollTop();
        this.startAutoRefresh(); // Iniciar auto-actualización
      },

      setupEventListeners: function() {
        // Event listeners para las categorías del menú
        document.querySelectorAll('.category-item').forEach(item => {
          item.addEventListener('click', (e) => {
            e.preventDefault();
            // Ignorar clics si ya está cargando o si es la categoría actual
            if(this.isLoading || e.target.dataset.category === this.currentCategory) {
                if (this.isLoading) console.log("Ignorando click: ya está cargando.");
                return;
            }

            const newCategory = e.target.dataset.category;

            // Actualizar estado activo del menú
            document.querySelectorAll('.category-item').forEach(i => i.classList.remove('active'));
            e.target.classList.add('active');

            this.currentCategory = newCategory; // Actualizar categoría actual
            this.loadNews(true); // Cargar nuevas noticias (carga manual)
            this.startAutoRefresh(); // Reiniciar el temporizador para la nueva categoría
          });
        });

        // Listener para Scroll Top se configura en setupScrollTop
      },

      // Iniciar/reiniciar el temporizador de auto-actualización
      startAutoRefresh: function(intervalInMinutes = 10) {
        clearInterval(this.refreshIntervalId); // Limpiar cualquier temporizador existente
        const intervalMilliseconds = intervalInMinutes * 60 * 1000;
        this.refreshIntervalId = setInterval(() => {
            console.log(`Auto-actualizando noticias para la categoría: ${this.currentCategory}`);
            this.loadNews(false); // Cargar noticias (auto-refresh)
        }, intervalMilliseconds);
      },

      // Función para cargar noticias desde la API
      async loadNews(isManualLoad = true) { // isManualLoad: true si es por click/inicial, false si es por auto-refresh
        if (this.isLoading) {
            console.log("loadNews llamada pero ya isLoading");
            return; // No cargar si ya hay una carga en curso
        }

        this.toggleLoading(true); // Mostrar loader

        // Limpiar contenedor solo si es una carga manual (inicial o por click de menú)
        if (isManualLoad) {
             this.clearNews();
        }


        try {
          const url = new URL(this.BASE_URL);
          url.searchParams.append('apiKey', this.API_KEY);
          url.searchParams.append('lang', 'spa');
          url.searchParams.append('count', 10); // Pedimos 10 noticias para llenar las secciones

          if(this.currentCategory === 'crypto') {
            url.searchParams.append('query', 'criptomonedas');
          } else {
            const category = this.apiCategoryMap[this.currentCategory];

            if(category) { // Si la categoría mapeada no está vacía (ej: para 'general' es vacía)
                url.searchParams.append('category', category);
            }
            // Si currentCategory es 'general', no se añade el parámetro 'category', solo se usan lang y count
          }
          console.log("Fetching URL:", url.toString());

          const response = await fetch(url);

          // Manejar errores HTTP (401, 403, 429, etc.)
          if (!response.ok) {
               const errorBody = await response.text(); // Intentar leer cuerpo del error
               console.error(`HTTP error ${response.status}:`, errorBody);
               // Lanzar un error con más detalle
               const apiError = JSON.parse(errorBody || '{}'); // Parsear si es JSON
               const errorMessage = apiError.message || apiError.error || errorBody || response.statusText;
               throw new Error(`API Error: ${response.status} - ${errorMessage}`);
          }

          const data = await response.json();
          console.log("API Response Data:", data);

          // Newsapi.ai anida los resultados en 'articles.results'
          const articles = data?.articles?.results || [];

          if(articles.length > 0) {
             // Limpiar antes de renderizar si no se hizo en la carga manual inicial
             if (!isManualLoad) { // Si es auto-refresh
                 this.clearNews();
             }
             this.renderNews(articles); // Usar la función de renderizado adaptada
          } else {
             if (isManualLoad) {
                // Mostrar mensaje si no hay noticias en la carga manual/inicial
                this.showMessage('No se encontraron noticias para esta categoría o búsqueda.');
             } else {
                 // Mensaje más discreto o nada en auto-refresh si no hay nuevas noticias
                 console.log('Auto-actualización: No se encontraron nuevas noticias para mostrar.');
             }
          }

        } catch (error) {
          console.error('Error fetching news:', error);
           let displayMsg = 'Error al cargar noticias. ';
           // Mejorar mensajes de error basados en el error capturado
           if (error.message.includes('API Error:')) {
               displayMsg = error.message.replace('API Error:', 'Error de la API:');
           } else if (error.message.includes('Failed to fetch')) {
               displayMsg = 'Error de conexión. Verifica tu conexión a internet.';
           } else {
                displayMsg += 'Intenta nuevamente más tarde.';
           }


          // Mostrar el mensaje de error en la interfaz solo para cargas manuales/iniciales o si es un error de API obvio
          if (isManualLoad || (error.message.includes('API Error:') || error.message.includes('Failed to fetch'))) {
              this.showMessage(displayMsg, true); // true indica que es un mensaje de error visual
              // Detener auto-refresh en caso de errores graves de API o conexión
               clearInterval(this.refreshIntervalId);
               this.refreshIntervalId = null; // Marcar como detenido
          } else {
              console.log(`Auto-actualización fallida (error no crítico en UI): ${displayMsg}`);
              // No mostrar mensaje intrusivo para otros tipos de errores de auto-refresh
          }


        } finally {
          this.toggleLoading(false); // Ocultar loader
        }
      },

      // Función para renderizar noticias usando la estructura del primer HTML
      renderNews: function(articles) {
        const newsContainer = document.getElementById('news-container');
        let htmlContent = ''; // Variable para construir el HTML a insertar

        // Asegurarse de que el contenedor esté limpio antes de añadir contenido
        // Esto ya se maneja en loadNews, pero es buena práctica aquí también si esta función se llamara directamente
        // newsContainer.innerHTML = ''; // Comentado porque loadNews ya lo hace si isManualLoad es true

        // Noticia destacada (el primer artículo)
        if (articles.length > 0) {
            const featured = articles[0];
             // Validar que el artículo destacado tenga al menos título, URL e imagen (deseable)
             if (featured && featured.title && featured.url) {
                 htmlContent += `<article class="featured-news">
                    <a href="${featured.url}" target="_blank" rel="noopener noreferrer">
                        <img src="${featured.image || 'https://via.placeholder.com/1200x400?text=Noticia+Destacada'}" alt="${featured.title}" class="featured-img" onerror="this.src='https://via.placeholder.com/1200x400?text=Imagen+No+Disponible'">
                        <div class="featured-content">
                        <span class="featured-tag">DESTACADA</span>
                        <h1 class="featured-title">${featured.title}</h1>
                        <p class="featured-excerpt">${featured.body || 'Descripción no disponible.'}</p>
                        <p class="featured-meta">${this.formatDate(featured.pubDate)} | ${featured.source && featured.source.title ? featured.source.title : 'Fuente desconocida'}</p>
                        </div>
                    </a>
                </article>`;
             } else {
                console.warn("Saltando artículo destacado inválido (faltan título/url/imagen):", featured);
             }
        }

        // Secundarias (artículos 1 a 3)
        const secondaryArticles = articles.slice(1, 4); // Obtener artículos del índice 1 al 3
        if (secondaryArticles.length > 0) {
            let secondaryHtml = '<div class="secondary-news">';
            secondaryArticles.forEach(item => {
                 // Validar que el artículo secundario tenga al menos título y URL
                 if (item && item.title && item.url) {
                    secondaryHtml += `<article class="secondary-card">
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer">
                            <img src="${item.image || 'https://via.placeholder.com/400x180?text=Noticia'}" alt="${item.title}" class="secondary-img" onerror="this.src='https://via.placeholder.com/400x180?text=Imagen+No+Disponible'">
                            <div class="secondary-content">
                              <span class="secondary-tag">${item.source && item.source.title ? item.source.title : 'Fuente desconocida'}</span>
                              <h2 class="secondary-title">${this.truncateText(item.title, 80)}</h2>
                              <p class="secondary-meta">${this.formatDate(item.pubDate)}</p>
                            </div>
                         </a>
                      </article>`;
                 } else {
                     console.warn("Saltando artículo secundario inválido:", item);
                 }
            });
            secondaryHtml += '</div>';
            htmlContent += secondaryHtml;
        }

        // Terciarias (artículos 4 en adelante)
        const tertiaryArticles = articles.slice(4); // Obtener artículos desde el índice 4 hasta el final
        if (tertiaryArticles.length > 0) {
             let tertiaryHtml = '<div class="tertiary-news">';
             tertiaryArticles.forEach(item => {
                 // Validar que el artículo terciario tenga al menos título y URL
                 if (item && item.title && item.url) {
                    tertiaryHtml += `<article class="tertiary-card">
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer">
                            <img src="${item.image || 'https://via.placeholder.com/300x100?text=Noticia'}" alt="${item.title}" class="terciary-img" onerror="this.src='https://via.placeholder.com/300x100?text=Imagen+No+Disponible'">
                            <div class="tertiary-content">
                              <h3 class="tertiary-title">${this.truncateText(item.title, 60)}</h3>
                              <p class="tertiary-meta">${this.formatDate(item.pubDate)} | ${item.source && item.source.title ? item.source.title : 'Fuente desconocida'}</p>
                            </div>
                         </a>
                      </article>`;
                 } else {
                     console.warn("Saltando artículo terciario inválido:", item);
                 }
             });
             tertiaryHtml += '</div>';
             htmlContent += tertiaryHtml;
        }

        // Insertar el HTML generado en el contenedor principal
        if (htmlContent !== '') {
             newsContainer.innerHTML = htmlContent;
        } else if (articles.length > 0) {
            // Si la API devolvió artículos, pero ninguno era válido para renderizar
            console.warn("API devolvió artículos, pero ninguno pudo ser renderizado.");
             this.showMessage("No se pudieron mostrar las noticias recibidas. Algunos datos pueden estar incompletos.", true);
        } else {
            // Si la API devolvió 0 artículos (ya manejado en loadNews, pero fallback)
             console.log("renderNews llamada con 0 artículos.");
             // loadNews ya debería haber mostrado un mensaje si isManualLoad era true
        }

      },

      // --- Helper Functions (tomadas de versiones anteriores) ---

      // Función para formatear la fecha
      formatDate: function(dateString) {
         if (!dateString) return 'Fecha no disponible';
         try {
            const date = new Date(dateString);
            if (isNaN(date.getTime())) {
                return 'Fecha inválida';
            }
            return date.toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
         } catch (e) {
            console.error("Error formatting date:", e);
            return 'Error al formatear fecha';
         }
      },

      // Función para truncar texto (título o descripción si se usa)
      truncateText: function(text, maxLength) {
        if (!text) return '';
        return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
      },

      // Mostrar u ocultar el loader
      toggleLoading: function(show) {
        this.isLoading = show;
        document.getElementById('loader').style.display = show ? 'block' : 'none';
      },

      // Limpiar el contenedor de noticias
      clearNews: function() {
        document.getElementById('news-container').innerHTML = '';
        // Opcional: quitar mensajes de error/info previos al limpiar
      },

       // Mostrar mensajes en la interfaz (errores o info)
      showMessage: function(message, isError = false) {
        this.clearNews(); // Limpiar noticias antes de mostrar mensaje
        const div = document.createElement('div');
        div.className = `message ${isError ? 'error-message' : 'info-message'}`; // info-message no tiene estilos por defecto
        div.textContent = message;
        document.getElementById('news-container').appendChild(div);
      },

      // Configurar el botón de Scroll Top
      setupScrollTop: function() {
        const scrollTop = document.getElementById('scrollTop');
        if (!scrollTop) return; // Asegurarse de que el elemento exista

        // Mostrar/ocultar el botón basado en el scroll
        window.addEventListener('scroll', () => {
          scrollTop.style.display = window.scrollY > 500 ? 'flex' : 'none';
        });

        // Hacer scroll suave al hacer click
        scrollTop.addEventListener('click', () => {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });
      },

      // Carga inicial al cargar la página
      loadInitialNews: function() {
        // Cargar noticias iniciales (usa la categoría 'general' por defecto)
        this.loadNews(true); // 'true' indica que es una carga manual/inicial
      }
    };

    // Inicializar la aplicación cuando el DOM esté completamente cargado
    document.addEventListener('DOMContentLoaded', () => {
        NewsApp.init();
    });

    // Limpiar el temporizador de auto-actualización si el usuario sale de la página
    window.addEventListener('beforeunload', () => {
        clearInterval(NewsApp.refreshIntervalId);
    });

  </script>
</body>
</html>
